<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
        <meta charset="utf-8">
        <link rel="stylesheet" href="https://www.trafforddatalab.io/traffordDataLab.github.io/css/labBase.css"/>
        <link rel="stylesheet" href="https://www.trafforddatalab.io/traffordDataLab.github.io/css/labWebsite.css"/>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans|Roboto"/>
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css" integrity="sha384-+d0P83n9kaQMCwj8F4RJB66tzIwOKmrdb46+porD/OvrJ+37WqIM7UoBtwHO6Nlg" crossorigin="anonymous">

        <style>
            .card
            {
                width: 20%;
                height: 230px;
                margin: 2.2% 2.2%;
                display: inline-block;
                border: 1px solid #cccccc;
                border-radius: 3px;
                vertical-align:top;
                overflow: hidden;
            }

            .card:hover
            {
                border: 1px solid #fc6721;
            }

            .filter
            {
                transition: all 0.30s ease-in-out;
                outline: none;
                padding: 3px 0px 3px 3px;
                margin: 5px 1px 3px 0px;
                border: 1px solid #ccc;
                border-radius: 3px;
            }

            .filter:focus
            {
                border: 1px solid #fc6721;
                box-shadow: 0 0 5px #fc6721;
            }

            @media (max-width:1300px)
            {
                .card
                {
                    width: 28%;
                    margin: 1em 2.2%;
                }
            }

            @media (max-width:850px)
            {
                .card
                {
                    width: 40%;
                    margin: 1em 4.5%;
                }
            }

            @media (max-width:620px)
            {
                .card
                {
                    width: 100%;
                    height: 300px;
                    margin: 1em 0;
                }
            }
        </style>
    </head>

    <body>
        <div class="container">
            <div class="header">
                <a href="index.html"><img src="https://www.trafforddatalab.io/assets/logo/trafforddatalab_logo.svg" alt="Trafford Data Lab" width="93" border="0" class="traffordDataLabLogo"/></a>

                <h2 class="hideContent">Main Menu</h2>   <!-- Menu heading displayed only if we don't have CSS enabled -->
                <ul class="navbar noBulletPoints">
                    <li class="hideContent"><a href="index.html">Home</a></li>   <!-- Home link displayed only if we don't have CSS enabled -->
                    <li class="menuItem"><a href="projects.html">Projects</a></li>
                    <li class="menuItem"><a href="data.html">Data</a></li>
                    <li class="menuItem"><a href="learning.html">Learning</a></li>
                    <li class="menuItem"><a href="about.html">About</a></li>
                </ul>
            </div>
            <div class="main">
                <h1>Charticles</h1>
                <p>Bitesize articles with a chart or a map. <span id="filterContainer" style="display: inline-block;"></span></p>
                <div>
                    <a class="card" href="https://www.trafforddatalab.io/charticles/2019-11-13-green-flags/" target="_blank"><filterTags class="hideContent"><!-- green flags parks --></filterTags>Green flags<img src="https://www.trafforddatalab.io/charticles/2019-11-13-green-flags/plot.svg" alt="Green flags" border="0"/></a>
                    <a class="card" href="https://www.trafforddatalab.io/charticles/2019-11-12-living-wage/" target="_blank"><filterTags class="hideContent"><!-- living wages employment jobs deprivation poverty working --></filterTags>Living wage<img src="https://www.trafforddatalab.io/charticles/2019-11-12-living-wage/plot.svg" alt="Living wage" border="0"/></a>
                    <a class="card" href="https://www.trafforddatalab.io/charticles/2019-11-11-alcohol-related-deaths/" target="_blank"><filterTags class="hideContent"><!-- alcohol related deaths drinking unhealthy --></filterTags>Alcohol-related deaths<img src="https://www.trafforddatalab.io/charticles/2019-11-11-alcohol-related-deaths/plot.svg" alt="Alcohol-related deaths" border="0"/></a>
                    <a class="card" href="https://www.trafforddatalab.io/charticles/2019-11-08-living-alone/" target="_blank"><filterTags class="hideContent"><!-- living alone loneliness lonely --></filterTags>Living alone<img src="https://www.trafforddatalab.io/charticles/2019-11-08-living-alone/plot.svg" alt="Living alone" border="0"/></a>
                    <a class="card" href="https://www.trafforddatalab.io/charticles/2019-11-07-road-casualties/" target="_blank"><filterTags class="hideContent"><!-- road casualties casualty road safety --></filterTags>Road casualties<img src="https://www.trafforddatalab.io/charticles/2019-11-07-road-casualties/plot.svg" alt="Road casualties" border="0"/></a>
                    <a class="card" href="https://www.trafforddatalab.io/charticles/2019-11-06-childhood-obesity/" target="_blank"><filterTags class="hideContent"><!-- childhood obesity obese unhealthy --></filterTags>Childhood obesity<img src="https://www.trafforddatalab.io/charticles/2019-11-06-childhood-obesity/plot.svg" alt="Childhood obesity" border="0"/></a>
                    <a class="card" href="https://www.trafforddatalab.io/charticles/2019-11-05-co2-emissions/" target="_blank"><filterTags class="hideContent"><!-- co2 emissions carbon dioxide climate environment --></filterTags>CO2 emissions<img src="https://www.trafforddatalab.io/charticles/2019-11-05-co2-emissions/plot.svg" alt="CO2 emissions" border="0"/></a>
                    <a class="card" href="https://www.trafforddatalab.io/charticles/2019-11-04-businesses/" target="_blank"><filterTags class="hideContent"><!-- businesses employment jobs --></filterTags>Businesses<img src="https://www.trafforddatalab.io/charticles/2019-11-04-businesses/table.png" alt="Businesses" border="0"/></a>
                    <a class="card" href="https://www.trafforddatalab.io/charticles/2019-11-01-relative-deprivation/" target="_blank"><filterTags class="hideContent"><!-- relative deprivation poverty --></filterTags>Relative deprivation<img src="https://www.trafforddatalab.io/charticles/2019-11-01-relative-deprivation/plot.svg" alt="Relative deprivation" border="0"/></a>
                    <a class="card" href="https://www.trafforddatalab.io/charticles/2019-10-31-gva/" target="_blank"><filterTags class="hideContent"><!-- gross value added gva --></filterTags>Gross Value Added<img src="https://www.trafforddatalab.io/charticles/2019-10-31-gva/plot.svg" alt="GVA" border="0"/></a>
                    <a class="card" href="https://www.trafforddatalab.io/charticles/2019-10-30-eco-heating/" target="_blank"><filterTags class="hideContent"><!-- eco-heating ecoheating climate environment --></filterTags>Eco-heating<img src="https://www.trafforddatalab.io/charticles/2019-10-30-eco-heating/plot.svg" alt="Eco-heating" border="0"/></a>
                    <a class="card" href="https://www.trafforddatalab.io/charticles/2019-10-29-broadband-speed/" target="_blank"><filterTags class="hideContent"><!-- broadband speed connection internet web --></filterTags>Broadband speed<img src="https://www.trafforddatalab.io/charticles/2019-10-29-broadband-speed/plot.svg" alt="Broadband speed" border="0"/></a>
                    <a class="card" href="https://www.trafforddatalab.io/charticles/2019-10-28-crime-rate/" target="_blank"><filterTags class="hideContent"><!-- crime rate criminality police --></filterTags>Crime rate<img src="https://www.trafforddatalab.io/charticles/2019-10-28-crime-rate/plot.svg" alt="Crime rate" border="0"/></a>
                    <a class="card" href="https://www.trafforddatalab.io/charticles/2019-10-25-green-belt/" target="_blank"><filterTags class="hideContent"><!-- green belt land environment --></filterTags>Green Belt<img src="https://www.trafforddatalab.io/charticles/2019-10-25-green-belt/plot.svg" alt="Green belt" border="0"/></a>
                    <a class="card" href="https://www.trafforddatalab.io/charticles/2019-10-24-recycling/" target="_blank"><filterTags class="hideContent"><!-- recycling environment --></filterTags>Recycling<img src="https://www.trafforddatalab.io/charticles/2019-10-24-recycling/plot.svg" alt="Recycling" border="0"/></a>
                    <a class="card" href="https://www.trafforddatalab.io/charticles/2019-10-23-travel-to-work/" target="_blank"><filterTags class="hideContent"><!-- travel to work commute employment jobs working --></filterTags>Travel to work<img src="https://www.trafforddatalab.io/charticles/2019-10-23-travel-to-work/plot.svg" alt="Travel to work" border="0"/></a>
                    <a class="card" href="https://www.trafforddatalab.io/charticles/2019-10-22-electric-vehicles/" target="_blank"><filterTags class="hideContent"><!-- electric vehicles climate environment --></filterTags>Electric vehicles<img src="https://www.trafforddatalab.io/charticles/2019-10-22-electric-vehicles/plot.svg" alt="Electric vehicles" border="0"/></a>
                    <a class="card" href="https://www.trafforddatalab.io/charticles/2019-10-21-air-pollution/" target="_blank"><filterTags class="hideContent"><!-- air pollution climate environment --></filterTags>Air pollution<img src="https://www.trafforddatalab.io/charticles/2019-10-21-air-pollution/plot.svg" alt="Air pollution" border="0"/></a>
                    <a class="card" href="https://www.trafforddatalab.io/charticles/2019-10-18-median-house-prices/" target="_blank"><filterTags class="hideContent"><!-- median house prices housing --></filterTags>Median house prices<img src="https://www.trafforddatalab.io/charticles/2019-10-18-median-house-prices/plot.svg" alt="Median house prices" border="0"/></a>
                    <a class="card" href="https://www.trafforddatalab.io/charticles/2019-10-17-fuel-poverty/" target="_blank"><filterTags class="hideContent"><!-- fuel poverty deprivation housing --></filterTags>Fuel poverty<img src="https://www.trafforddatalab.io/charticles/2019-10-17-fuel-poverty/plot.svg" alt="Fuel poverty" border="0"/></a>
                    <a class="card" href="https://www.trafforddatalab.io/charticles/2019-10-16-claimant-count/" target="_blank"><filterTags class="hideContent"><!-- claimant count employment jobs deprivation poverty working --></filterTags>Claimant count<img src="https://www.trafforddatalab.io/charticles/2019-10-16-claimant-count/plot.svg" alt="Claimant count" border="0"/></a>
                    <a class="card" href="https://www.trafforddatalab.io/charticles/2019-10-15-population-projection/" target="_blank"><filterTags class="hideContent"><!-- population projection people census --></filterTags>Population projection<img src="https://www.trafforddatalab.io/charticles/2019-10-15-population-projection/plot.svg" alt="Population projection" border="0"/></a>
                    <a class="card" href="https://www.trafforddatalab.io/charticles/2019-10-14-employment-rate/" target="_blank"><filterTags class="hideContent"><!-- employment rates jobs working --></filterTags>Employment rate<img src="https://www.trafforddatalab.io/charticles/2019-10-14-employment-rate/plot.svg" alt="Employment rate" border="0"/></a>
                    <a class="card" href="https://www.trafforddatalab.io/charticles/2019-04-12-gaps-in-life-expectancy/" target="_blank"><filterTags class="hideContent"><!-- gaps in life expectancy living unhealthy poverty --></filterTags>Gaps in life expectancy<img src="https://www.trafforddatalab.io/charticles/2019-04-12-gaps-in-life-expectancy/plot.svg" alt="Gaps in life expectancy" border="0"/></a>
                    <a class="card" href="https://www.trafforddatalab.io/charticles/2019-04-04-old-age-dependency-ratio/" target="_blank"><filterTags class="hideContent"><!-- old age dependency ratio jobs working --></filterTags>Old age dependency ratio<img src="https://www.trafforddatalab.io/charticles/2019-04-04-old-age-dependency-ratio/plot.svg" alt="Old age dependency ratio" border="0"/></a>
                </div>
            </div>

            <div class="footer">
                <div class="leftFooter">
                    <div class="logoMedia">
                        <span class="hideContent">Visit us on </span>
                        <a class="linkMedia" href="https://twitter.com/traffordDataLab" target="_blank"><span class="fab fa-twitter-square"></span><span class="hideContent">Twitter</span></a>
                        <span class="hideContent">, </span>
                        <a class="linkMedia" href="https://github.com/traffordDataLab" target="_blank"><span class="fab fa-github"></span><span class="hideContent">Github</span></a>
                        <span class="hideContent"> and </span>
                        <a class="linkMedia" href="https://medium.com/@traffordDataLab" target="_blank"><span class="fab fa-medium"></span><span class="hideContent">Medium<br /></span></a>
                    </div>
                    <div class="license">Code <a class="footerLink" href="LICENSE.txt" target="_blank">licensed</a> under MIT, data under OGL</div>
                </div>
                <div class="rightFooter">
                    <a href="https://www.trafford.gov.uk" target="_blank"><img class="logoTrafford" src="images/trafford_council_logo_black_on_white_100px.png" alt="Trafford Council" border="0"/></a>
                </div>
            </div>
        </div>

        <script type="text/javascript">
            // METHOD 1
            /*
            // Function taking input from the filter UI and performing the filtering process
            function filterContent(filterTerm) {
                var def_filterTerm = filterTerm.toLowerCase();    // convert the input to lowercase so we can match like-for-like with the content
                var el;

                // Loop through the content elements we have been given, looking for matches of def_filterTerms
                for (var i = 0; i < objFilter.filterTags.length; i++) {
                    el = objFilter.filterTags[i];

                    if (def_filterTerm == '' || el.innerHTML.toLowerCase().indexOf(def_filterTerm) > -1) {
                        // Either the filter has been cleared or a match has been found
                        el.parentNode.classList.add(objFilter.cssMatched);
                        el.parentNode.classList.remove(objFilter.cssUnMatched);
                    }
                    else {
                        // This is non-matching item and so needs to be removed
                        el.parentNode.classList.remove(objFilter.cssMatched);
                        el.parentNode.classList.add(objFilter.cssUnMatched);
                    }
                }
            }

            function displayFilter(domEl, css) {
                // The form element to contain the filter
                var form = document.createElement('form');
                form.id = 'frmFilter';
                form.name = 'frmFilter';
                form.method = 'get';
                form.action = '';
                form.setAttribute('onSubmit', 'this.filterTerm.blur(); return false;');

                // The input box to enter the filter terms
                var input = document.createElement('input');
                input.type = 'text';
                input.id = 'filterTerm';
                input.name = 'filterTerm';
                input.placeholder = 'filter...';
                input.setAttribute('oninput', 'filterContent(this.value);');
                if (css !== null && css !== undefined && css !== '') input.setAttribute('class', css);

                try {
                    form.appendChild(input);    // add the filter input box to the form
                    domEl.appendChild(form);    // add the completed form to the HTML element provided to the function
                }
                catch(e) {
                    // Attempt to write out the error to the console, but if we can't don't worry - the functionality of the filter is not critical
                    if (window.console && window.console.log) {
                        window.console.log('Error in labFilter.js, function displayFilter()');
                        window.console.log(e);
                    }
                }
            }

            // The values for this object can be overidden in the page implementing the filter
            var objFilter = {
                filterTags: document.getElementsByTagName('filterTags'),   // the DOM elements containing the filter terms to search
                cssMatched: null,                                          // CSV of CSS classes that we want adding to an element when a filter match is found and removing when it's not
                cssUnMatched: 'hideContent'                                // CSV of CSS classes that we want removing from an element when a filter match is found and adding when it's not
            };

            objFilter.cssMatched = 'card';  // Specific page case
            displayFilter(document.getElementById('filterContainer'), 'filter');
            */





            // METHOD 2
            function LabFilter(objOptions) {
                var context = this;

                // Function taking input from the filter UI and performing the filtering process
                this.doFilter = function () {
                    var def_filterTerm = context.input.value.toLowerCase();    // convert the input to lowercase so we can match like-for-like with the content
                    var el;

                    // Loop through the content elements we have been given, looking for matches of def_filterTerms
                    for (var i = 0; i < context.contentElements.length; i++) {
                        el = context.contentElements[i];

                        if (def_filterTerm == '' || el.innerHTML.toLowerCase().indexOf(def_filterTerm) > -1) {
                            // Either the filter has been cleared or a match has been found
                            el.parentNode.classList.add(context.matchedClass);
                            el.parentNode.classList.remove(context.unMatchedClass);
                        }
                        else {
                            // This is non-matching item and so needs to be removed
                            el.parentNode.classList.remove(context.matchedClass);
                            el.parentNode.classList.add(context.unMatchedClass);
                        }
                    }
                };

                // Main properties
                this.contentElements = (objOptions['contentElements'] == null) ? document.getElementsByTagName('filterTags') : objOptions['contentElements'];  // the DOM elements containing the filter terms to search, looks for <filterTags> as default
                this.matchedClass = (objOptions['matchedClass'] == null) ? null : String(objOptions['matchedClass']);                 // CSV of CSS classes that we want adding to an element when a filter match is found and removing when it's not
                this.unMatchedClass = (objOptions['unMatchedClass'] == null) ? 'hideContent' : String(objOptions['unMatchedClass']);  // CSV of CSS classes that we want removing from an element when a filter match is found and adding when it's not, defaults to our standard 'hideContent' class (e.g. display: none;)

                // User Interface properties
                this.filterContainer = (objOptions['filterContainer'] == null) ? null : objOptions['filterContainer'];                      // The HTML object to create the user interface for the filter within
                this.filterClass = (objOptions['filterClass'] == null) ? null : String(objOptions['filterClass']);                          // CSS class[es] to apply to the user interface
                this.filterPlaceholder = (objOptions['filterPlaceholder'] == null) ? 'filter...' : String(objOptions['filterPlaceholder']); // text to display within the filter input box

                // Create the form element to contain the filter
                this.form = document.createElement('form');
                this.form.id = 'frmFilter';
                this.form.name = 'frmFilter';
                this.form.method = 'get';
                this.form.action = '';
                this.form.setAttribute('onSubmit', 'return false;');
                this.form.addEventListener('submit', this.doFilter);

                // Create the input box to enter the filter terms
                this.input = document.createElement('input');
                this.input.type = 'text';
                this.input.id = 'filterTerm';
                this.input.name = 'filterTerm';
                this.input.placeholder = this.filterPlaceholder;
                this.input.addEventListener('input', this.doFilter);
                if (this.filterClass !== null) this.input.setAttribute('class', this.filterClass);

                try {
                    this.form.appendChild(this.input);              // add the filter input box to the form
                    this.filterContainer.appendChild(this.form);    // add the completed form to the HTML element provided to the function
                }
                catch(e) {
                    // Attempt to write out the error to the console, but if we can't don't worry - the functionality of the filter is not critical
                    if (window.console && window.console.log) {
                        window.console.log('Error in labFilter.js appending the form to the filter container.');
                        window.console.log(e);
                    }
                }
            }

            var charticleFilter = new LabFilter({
                filterContainer: document.getElementById('filterContainer'),
                matchedClass: 'card',
                filterClass: 'filter'
            })
        </script>
    </body>
</html>
